(function(){"use strict";var e={2537:function(e,t,o){var i=o(9242),n=o(2483),s=o(3396),l=o(7139);const a=e=>((0,s.dD)("data-v-6c1c2980"),e=e(),(0,s.Cn)(),e),r={key:0,class:"fallings"},c=["src"],u=["src"],g={class:"titleContainer"},h=a((()=>(0,s._)("div",{class:"chinese"},[(0,s._)("div",null,"此间"),(0,s._)("div",null,"纪念馆")],-1))),p=a((()=>(0,s._)("div",{class:"english"},"INSIDE PKU Memorial",-1))),d=[h,p],m={class:"title"},v={class:"star1"},f=["src"],k={class:"star2"},y=["src"],_=a((()=>(0,s._)("div",{class:"line"},null,-1))),w={class:"main"},b=["src"],M={key:0,class:"quote"},C={class:"books"},B={class:"bookName"},j={class:"book"},D=["onMouseleave","onMouseenter","onClick"],S=a((()=>(0,s._)("div",{class:"footer"}," - 此间 - ",-1)));function R(e,t,o,i,n,a){const h=(0,s.up)("flipbook"),p=(0,s.up)("BooksDisplay");return(0,s.wg)(),(0,s.iD)("div",{class:"container",onMousemove:t[0]||(t[0]=(...e)=>a.handleMouseMove&&a.handleMouseMove(...e))},[n.animate?((0,s.wg)(),(0,s.iD)("div",r,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.fallingSvgs,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"falling",key:e,style:(0,l.j5)(a.fallingStyle[t])},[(0,s._)("img",{src:e,alt:""},null,8,c)],4)))),128))])):(0,s.kq)("",!0),(0,s._)("div",{ref:"coverTiles",style:(0,l.j5)(a.coverTilesStyle),class:"coverTiles"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.covers,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{style:(0,l.j5)(a.coverContainerStyles[t]),class:"coverContainer",key:e},[(0,s._)("img",{style:(0,l.j5)(a.coverStyles[t]),class:"cover",alt:"cover",src:e},null,12,u)],4)))),128)),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.decorationPositions,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:t,style:(0,l.j5)(a.decorationStyles[t]),class:(0,l.C_)(`decoration decoration${t}`)},null,6)))),128)),(0,s._)("div",g,[(0,s._)("div",{style:(0,l.j5)(a.titleStyle),class:"title"},d,4)]),(0,s._)("div",{style:(0,l.j5)(a.followerStyle),class:"follower"},null,4)],4),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.timeline,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.title,class:"section"},[(0,s._)("div",m,[(0,s._)("div",v,[(0,s._)("img",{src:n.Star,alt:""},null,8,f)]),(0,s._)("div",k,[(0,s._)("img",{src:n.StarLine,alt:""},null,8,y)]),(0,s.Uk)(" "+(0,l.zw)(e.title)+" ",1),_]),(0,s._)("div",w,(0,l.zw)(e.main),1),(0,s._)("img",{class:"bg",src:a.getPageUrl(e.books[0].key,1),alt:"cover"},null,8,b),e.quote?((0,s.wg)(),(0,s.iD)("div",M,(0,l.zw)(e.quote),1)):(0,s.kq)("",!0),(0,s._)("div",C,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.books,(e=>((0,s.wg)(),(0,s.iD)("div",{class:(0,l.C_)(["bookItem",{selected:e===n.openedBook&&e!==n.preCloseBook}]),style:{position:"relative"},key:e.key},[(0,s._)("div",B,(0,l.zw)(e.title),1),(0,s._)("div",j,[(0,s.Wm)(h,{"single-page":!0,flipDuration:300,zooms:null,gloss:.5,ambient:.2,class:"flipbook",pages:[a.getPageUrl(e.key,1),a.getPageUrl(e.key,2),a.getPageUrl(e.key,3)]},{default:(0,s.w5)((t=>[(0,s._)("div",{onMouseleave:e=>a.handleBookMouseOut(t),onMouseenter:e=>a.handleBookMouseOver(t),class:"mask",onClick:t=>a.openBook(e)},null,40,D)])),_:2},1032,["gloss","ambient","pages"])])],2)))),128))])])))),128)),S,n.openedBook?((0,s.wg)(),(0,s.j4)(p,{key:1,title:n.openedBook.title,onClose:a.closeBook,pages:a.getAllPages(n.openedBook)},null,8,["title","onClose","pages"])):(0,s.kq)("",!0)],32)}function O(e){let t,o=e.length;while(0!==o)t=Math.floor(Math.random()*o),o--,[e[o],e[t]]=[e[t],e[o]];return e}const x=[{title:2014,main:"《此间》第一次发行杂志版，是为2014新生特刊1、2，实际相当于后来每期杂志中的主刊和副刊，此处合并。",books:[{title:"2014新生特刊",key:"2014fallspec",length:72}]},{title:2015,main:"确定了《此间》季刊的杂志形式，第一次发布《此间》杂志的招新。招新文案如是说：",quote:"北京大学《此间》是北京大学学生会主办的刊物，于2012年秋季正式创刊，由北京大学学生会宣传部编辑出版，是北大校内发行量最大的学生杂志。“传达，于此之间”是《此间》的宣传语，“理性/深度/人文/兼容”是《此间》的杂志定位，《此间》要传达的，不仅是思想的深度与思维的广度，更是面对事件的态度与新闻报道的温度。同学们的关注在哪里，此间人的足迹就在哪里。如今《此间》累计出版25期，杂志版3期，策划并操作了数十个在校内外受到广泛关注的深度选题。2015年9月，《此间》改版为杂志版季刊，致力于打造北大一个兼具思想性与传承性的文化品牌。一座伟大的大学，需要一个伟大的媒体。",books:[{title:"2015夏季刊",key:"2015sum",length:108},{title:"2015新生特刊",key:"2015fallspec",length:102},{title:"2015冬季刊",key:"2015winter",length:130}]},{title:2016,main:"转型为杂志后的第二年。",books:[{title:"2016春季刊",key:"2016spring",length:130},{title:"2016秋季刊",key:"2016fall",length:110},{title:"2016冬季刊",key:"2016winter",length:142}]},{title:2017,main:"西南联大80周年，《此间》唯一一次在每个季节都刊发了一期杂志。这一年约采的模板后来一直沿用：",quote:"尊敬的______先生/女士：\n\n作为北京大学乃至全国各高校间最具知名度的学生杂志，「深度/理性/人文/兼容」「关注北大人，和北大人关注的一切」是《此间》始终秉持的理念。《此间》是北京大学学生会会刊，每期发行量 5000 册，读者覆盖绝大部分北大在校学生。五年来，《此间》策划了数十个在校内外受到广泛关注的深度选题，并和上百位包括北大教授、业界巨擘、学生新锐在内的采访对象保持良好的合作关系。而和其他校园媒体不同的是，《此间》并不囿于提供校园资讯和优质文章，而是关注北大以及社会上最具记录价值的人物与事件，追寻「于此之间」的意义。 作为这样一个在新媒体与传统媒体领域都拥有强大影响力的平台，我们希望能与那些各个领域的佼佼者一起，为传播积极有益的生活方式，倡导宽容多元的文化氛围做出应尽的努力！\n\n尊敬的______先生/女士，我们诚挚地邀请您接受《此间》杂志的采访邀约....\n\n顺颂时祺！\n",books:[{title:"2017春季刊",key:"2017spring",length:100},{title:"2017夏季刊",key:"2017sum",length:98},{title:"2017秋季刊",key:"2017fall",length:100},{title:"2017冬季刊",key:"2017winter",length:106}]},{title:2018,main:"北大120周年校庆，《此间》只刊发了两期杂志。",books:[{title:"2018夏季刊",key:"2018sum",length:102},{title:"2018秋季刊",key:"2018fall",length:105}]},{title:2019,main:"《此间》上线了自己的小程序，在春季尝试了电子刊的形式。",books:[{title:"2019夏季刊",key:"2019sum",length:96},{title:"2019秋季刊",key:"2019fall",length:128}]}],W=(e,t)=>`./images/${e}/${e}_${t>9?"0"+t:"00"+t}.jpg`,$=e=>Array.from({length:e.length}).map(((t,o)=>W(e.key,o+1)));var H=o(9178);const P=["src"],T={class:"controls"},q=["onClick"],z=["src"],U=(0,s._)("span",{class:"text"}," 上一页 ",-1),I=["onClick"],L=(0,s._)("span",{class:"text"}," 下一页 ",-1),Y=["src"];function A(e,t,o,n,a,r){const c=(0,s.up)("flipbook");return(0,s.wg)(),(0,s.iD)("div",{onScroll:t[1]||(t[1]=(0,i.iM)((()=>{}),["stop"])),class:(0,l.C_)(["singleBook",{preCloseBook:a.preCloseBook}])},[(0,s.Wm)(c,{zooms:null,gloss:.1,ambient:.8,class:"flipbook",pages:o.pages},{default:(0,s.w5)((e=>[(0,s._)("div",{onClick:t[0]||(t[0]=(...e)=>r.closeBook&&r.closeBook(...e)),class:"bookTitle"},[(0,s._)("img",{src:a.back_android_light,alt:""},null,8,P),(0,s.Uk)(" "+(0,l.zw)(o.title),1)]),(0,s._)("div",T,[(0,s._)("div",{class:"btn",onClick:e.flipLeft},[(0,s._)("img",{src:a.ChevronLeft,alt:""},null,8,z),U],8,q),(0,s._)("div",{class:"btn",onClick:e.flipRight},[L,(0,s._)("img",{src:a.ChevronRight,alt:""},null,8,Y)],8,I)])])),_:1},8,["gloss","ambient","pages"])],34)}var K=o.p+"img/chevron-left.f50ea15c.svg",Z=o.p+"img/chevron-right.816602ce.svg",E=o.p+"img/back_android_light.32f1f8c8.svg",N={name:"BooksDisplay",props:{pages:Array,title:String},data(){return{ChevronLeft:K,ChevronRight:Z,preCloseBook:!1,back_android_light:E}},methods:{closeBook(){this.preCloseBook=!0,this.$emit("close")}},components:{flipbook:H.Z}},X=o(89);const F=(0,X.Z)(N,[["render",A]]);var G=F,J=o.p+"img/star.f6312bc3.svg",Q=o.p+"img/star-line.dda531b5.svg",V=o.p+"img/1.6ecfe65f.svg",ee=o.p+"img/2.802ce7c1.svg",te=o.p+"img/3.433fa140.svg",oe=o.p+"img/4.d772bb33.svg",ie=o.p+"img/5.0904ce09.svg",ne=o.p+"img/6.a969e9d1.svg",se=o.p+"img/7.2e4334db.svg",le=o.p+"img/8.a90cdf20.svg";const ae=["18autumn.jpeg","18winter.jpeg","19spring.jpeg","19summer.jpeg","19autumn.jpeg"];O(ae);const re=[[.2,.2],[.3,.8],[.5,.4],[.8,.8],[.9,.2]],ce=[[.3,.2],[0,1],[.4,.5],[.6,.1],[.2,.7],[1,.5]];function ue(e){return Math.max(0,Math.min(1,.5-e))}var ge={name:"HomePage",data(){return{covers:ae,decorationPositions:ce,mouseWidthRatio:.2,mouseHeightRatio:.2,mousePosition:{},originalOrientation:null,timeline:x,Star:J,StarLine:Q,openedBook:null,preCloseBook:null,fallingSvgs:[V,ee,te,oe,ie,ne,se,le],fallRounds:0,animate:!0}},components:{BooksDisplay:G,flipbook:H.Z},mounted(){document.title="此间纪念馆",window.addEventListener("deviceorientation",(e=>{this.originalOrientation?(this.mouseWidthRatio=ue((e.gamma-this.originalOrientation[1])/50),this.mouseHeightRatio=ue((e.beta-this.originalOrientation[0])/50)):this.originalOrientation=[e.beta,e.gamma]}),!1),setInterval((()=>{this.animate=!1,this.fallRounds+=1,this.$nextTick((()=>{this.animate=!0}))}),7e3)},computed:{coverContainerStyles(){return ae.map(((e,t)=>({left:100*re[t][0]+"vw",top:100*re[t][1]+"vh",animationDelay:.6*t+"s"})))},coverStyles(){return ae.map(((e,t)=>({transform:`scale(${1+.1*this.adjustedWeights[t]}) `,filter:`blur(${70*(1-this.adjustedWeights[t])}px)`,opacity:.5+.5*this.adjustedWeights[t],willChange:"transform filter opacity"})))},titleStyle(){const e=Math.pow(this.mouseHeightRatio-.5,2)+Math.pow(this.mouseWidthRatio-.5,2);return{transform:`translate(-50%, -70%) perspective(1000px) rotate3d( ${.5-this.mouseHeightRatio}, ${this.mouseWidthRatio-.5},0, ${30*e}deg )`}},coverBgStyles(){return ae.map(((e,t)=>{let o=this.adjustedWeights[t];return t===ae.length-1&&(o=1),{opacity:o,zIndex:-t-1}}))},coverTilesStyle(){return ae.map(((e,t)=>({animationDelay:.1*t+"s"})))},weights(){return ae.map(((e,t)=>{const o=re[t][0]-this.mouseWidthRatio,i=re[t][1]-this.mouseHeightRatio,n=o*o+i*i;return Math.pow(Math.min(1,Math.max(1-n,0)),2)}))},decorationWeights(){return ce.map(((e,t)=>{const o=ce[t][0]-this.mouseWidthRatio,i=ce[t][1]-this.mouseHeightRatio,n=o*o+i*i;return Math.pow(Math.min(1,Math.max(1-n,0)),4)}))},decorationStyles(){return ce.map(((e,t)=>({opacity:.2*this.decorationWeights[t],left:100*e[0]+"%",top:100*e[1]+"%"})))},followerStyle(){return{transform:`translate(${this.mouseWidthRatio*this.$refs.coverTiles?.clientWidth}px,${this.mouseHeightRatio*this.$refs.coverTiles?.clientHeight}px)`}},adjustedWeights(){const e=this.weights.reduce(((e,t)=>e+t),0),t=this.weights.map((t=>Math.pow(t/e,1))),o=Math.max(...t),i=[...t];i.splice(t.indexOf(o),1);const n=Math.max(...i),s=(o-n)/.06,l=t.map((e=>e/o*(.9+.1*s))),a=Math.max(...l,1),r=l.map((e=>e/a*.9));return r},fallingStyle(){return Array.from({length:8}).map(((e,t)=>({left:(t+this.fallRounds)%8*12.5+6.25+"vw",animationDelay:5*Math.random()+"s",top:80*Math.random()+"vh"})))}},methods:{openBook(e){console.log("opens"),this.openedBook=e},closeBook(){this.preCloseBook=this.openedBook,setTimeout((()=>{this.openedBook=null,this.preCloseBook=null}),300)},handleMouseMove(e){if(this.originalOrientation)return;const t=this.$refs.coverTiles.clientWidth,o=this.$refs.coverTiles.clientHeight,i=e.pageX,n=e.pageY;this.mouseHeightRatio=n/o,this.mouseWidthRatio=i/t,this.mousePosition={mouseX:i,mouseY:n}},getPageUrl:W,getAllPages:$,handleBookMouseOver(e){e.flipRight()},handleBookMouseOut(e){e.flipLeft()}}};const he=(0,X.Z)(ge,[["render",R],["__scopeId","data-v-6c1c2980"]]);var pe=he;function de(e,t,o,i,n,l){const a=(0,s.up)("router-view");return(0,s.wg)(),(0,s.j4)(a)}var me={name:"App"};const ve=(0,X.Z)(me,[["render",de]]);var fe=ve;const ke=e=>((0,s.dD)("data-v-90d7cb0e"),e=e(),(0,s.Cn)(),e),ye={class:"parent"},_e=ke((()=>(0,s._)("div",{class:"top"},null,-1))),we=ke((()=>(0,s._)("div",{class:"bottom"},null,-1))),be=[_e,we];function Me(e,t,o,i,n,l){return(0,s.wg)(),(0,s.iD)("div",ye,be)}var Ce={name:"TestPage"};const Be=(0,X.Z)(Ce,[["render",Me],["__scopeId","data-v-90d7cb0e"]]);var je=Be;const De=[{path:"/",component:pe},{path:"/test",component:je}],Se=(0,n.p7)({history:(0,n.r5)(),routes:De}),Re=(0,i.ri)(fe);Re.use(Se),Re.mount("#app")}},t={};function o(i){var n=t[i];if(void 0!==n)return n.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,o),s.exports}o.m=e,function(){var e=[];o.O=function(t,i,n,s){if(!i){var l=1/0;for(u=0;u<e.length;u++){i=e[u][0],n=e[u][1],s=e[u][2];for(var a=!0,r=0;r<i.length;r++)(!1&s||l>=s)&&Object.keys(o.O).every((function(e){return o.O[e](i[r])}))?i.splice(r--,1):(a=!1,s<l&&(l=s));if(a){e.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[i,n,s]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var i in t)o.o(t,i)&&!o.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.p="/insidepku_memorial/"}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,i){var n,s,l=i[0],a=i[1],r=i[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(n in a)o.o(a,n)&&(o.m[n]=a[n]);if(r)var u=r(o)}for(t&&t(i);c<l.length;c++)s=l[c],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(u)},i=self["webpackChunkinsidepku_memorial"]=self["webpackChunkinsidepku_memorial"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=o.O(void 0,[998],(function(){return o(2537)}));i=o.O(i)})();
//# sourceMappingURL=app.b598ba16.js.map